<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUVASA Tracker - Seguimiento de tus paradas y buses en una sola pantalla</title>

    <!-- Descripci√≥n General -->
    <meta name="description" content="Seguimiento de tus paradas y buses en una sola pantalla">
    <meta name="theme-color" content="#054a32">

    <!-- Open Graph: Facebook, LinkedIn, y otros -->
    <meta property="og:title" content="AUVASA Tracker" />
    <meta property="og:description" content="üöè Seguimiento de tus paradas y buses en una sola pantalla." />
    <meta property="og:image" content="https://auvasatracker.com/favicon.png" />
    <meta property="og:url" content="https://auvasatracker.com/" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AUVASA Tracker">
    <meta name="twitter:description" content="üöè Seguimiento de tus paradas y buses en una sola pantalla.">
    <meta name="twitter:image" content="https://auvasatracker.com/favicon.png">

    <link rel="icon" type="image/x-icon" href="favicon.png">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="manifest" href="manifest.json">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <script>
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
        var u="//stats.auvasatracker.com/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '6']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
</head>

<body>
    <header>
        <h1>AUVASA Tracker</h1>
        <button id="installButton" style="display: none;">Instalar</button>
    </header>
 
    <div id="formulario">
        <form>
            <div id="inputs">
                <input type="text" id="stopNumber" placeholder="Introduzca una parada" />
                <input type="text" id="lineNumber" placeholder="Introduzca una l√≠nea" />
            </div>
            <button id="addButton" title="A√±adir a seguimiento" type="button">+</button>
        </form>

        <div id="nearestStops">
            <button id="searchNearStops">Paradas cercanas</button>
            <div id="nearestStopsResults"></div>
        </div>
    </div>

    <div id="autocompleteResults"></div>
    <div id="lineSuggestions"></div>

    <div class="bus-list" id="busList">
        <div id="welcome-box">
            <h2>Empiece a a√±adir lineas y paradas</h2>
            <p>Puede a√±adir paradas completas o l√≠neas individuales usando el buscador de la parte superior. </p>
            <h2>Instale o a√±ada la app</h2>
            <p>No olvide instalar o <strong>Agregar a la pantalla principal</strong> desde el men√∫ de su navegador o desde el icono Compartir <img src="img/ios-share.svg" alt="Icono compartir en iOS"/> en iOS</p>
        </div>
    </div>

    <div id="horarios-box"></div>
    <div id="mapContainer">
        <div id="busMap"></div>
        <div id="mapFooter">
            <p id="busMapLastUpdate">Actualmente no hay datos de ubicaci√≥n para esta l√≠nea</p>
            <button class="map-close">Cerrar mapa</button>
        </div>
    </div>

    <div class="foot-note">
        <button id="removeAllButton">Quitar todas las paradas</button>
        <p id="legend"><img src="img/clock.png"> Horario programado <img src="img/feed.png" /> Horario actualizado</p>
        <p id="last-update">√öltima actualizaci√≥n: --</p>
        <p>Actualizaci√≥n cada 30s o al recargar la p√°gina.</p>
        <h3 id="social-share">¬°Comparte la app con otros!</h3>
        <p>Ayuda a que otros conozcan esta app comparti√©ndola en tus redes y grupos. ¬°Qu√© nadie m√°s pierda un bus!</p>
        <a id="twitter-share-button" href="https://twitter.com/intent/tweet/?text=%F0%9F%9A%8FAUVASA%20Tracker%20te%20permite%20hacer%20un%20seguimiento%20de%20tus%20paradas%20y%20l%C3%ADneas%20de%20bus%20favoritas%20en%20una%20sola%20pantalla.%20%C2%A1Dale%20un%20vistazo%21%20%0A%0Ahttps%3A%2F%2Fauvasatracker.com%2F%0A%0Avia%20%40nukeador" target="_blank" rel="noopener" aria-label="Twitter">
            Compartir en Twitter
        </a>       
        <a id="whatsapp-share-button" href="whatsapp://send?text=%F0%9F%9A%8FAUVASA%20Tracker%20te%20permite%20hacer%20un%20seguimiento%20de%20tus%20paradas%20y%20l%C3%ADneas%20de%20bus%20favoritas%20en%20una%20sola%20pantalla.%20%C2%A1Dale%20un%20vistazo%21%20%0A%0Ahttps%3A%2F%2Fauvasatracker.com" target="_blank" rel="noopener" aria-label="Whatsapp">
            Compartir por Whatsapp
        </a> 
        <a id="facebook-share-button" href="https://www.facebook.com/sharer/sharer.php?u=https://auvasatracker.com/" target="_blank">
            Compartir en Facebook
        </a>          
        <a id="telegram-button" href="https://t.me/auvasatracker" target="_blank">üí¨ Nuestro grupo en Telegram</a>      
        <button id="theme-toggle">
            <span id="theme-toggle-icon" title="Cambiar a tema claro/oscuro">üåû</span> <!-- Icono de sol por defecto -->
        </button>       
        <p id="data-notice">Origen de los datos: <a href="http://auvasa.es/auv_opendata.asp">GTFS de AUVASA</a>, proporcionados de forma no oficial sin ninguna garant√≠a.</p>       
    </div>

    <footer>
        <a href="https://github.com/nukeador/auvasa-tracker">C√≥digo</a>
        <a href="https://t.me/auvasatracker">Contacto o informar de un error</a>
        <a href="https://www.gnu.org/licenses/agpl-3.0.html">Licencia AGPL 3</a>
    </footer>

    <div id="spinnerOverlay">
        <div class="spinner"></div>
    </div>
    
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="js/script.js"></script>
    <script src="js/buscador.js"></script>
    <script src="js/mapa.js"></script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                    // Registro exitoso
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    // Registro fallido
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>

</html>
